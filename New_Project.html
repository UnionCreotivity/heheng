<!DOCTYPE html>
<html lang="zh-tw">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/all.css" />
    <title>熱銷建案</title>
  </head>
  <body>
    <nav id="nav"></nav>
    <main id="new_project">
      <section class="cut-1">
        <div class="cut-1-left">
          <div class="cut-1-left-container">
            <div class="cut-1-left-banner">
              <picture>
                <source
                  media="(max-width:1024px)"
                  srcset="./img/new_project/banner-L-phone.png"
                />
                <img src="./img/new_project/banner-L.webp" alt="banner-L" />
              </picture>
            </div>
            <div class="cut-1-left-para">
              <div class="cut-1-left-para-second">
                <h1 class="cut-1-left-para-second-h1">New</h1>
                <h4 class="cut-1-left-para-second-h2 pc">熱銷建案</h4>
                <div class="cut-1-left-para-line-second ph"></div>
              </div>
              <div class="cut-1-left-para-first">
                <div class="cut-1-left-para-line pc"></div>
                <h4 class="cut-1-left-para-first-h4 ph">
                  熱銷建案
                  <div class="bottom-line ph"></div>
                </h4>
                <h1 class="cut-1-left-para-first-h1">Project</h1>
              </div>
            </div>
          </div>
          <div class="new_project-cut-1-left-fixed-img pc">
            <img src="./img/new_project/left-fixed@2x.webp" alt="left-fixed" />
          </div>
        </div>
        <div class="cut-1-right">
          <div class="cut-1-right-item-container">
            <div class="cut-1-right-item">
              <div class="cut-1-right-item-img">
                <img
                  src="./img/new_project/news-project-1.webp"
                  alt="news-project-1"
                />
                <div class="cut-1-right-item-white"></div>
              </div>
              <div class="cut-1-right-item-more">
                <h3>
                  恆合機構｜瑋石南京復興案<span>/</span>
                  <p class="ph">臺北市</p>
                </h3>
                <p class="pc">臺北市</p>
                <a href="New_Project-inner.html">更多內容</a>
              </div>
            </div>
            <div class="cut-1-right-item">
              <div class="cut-1-right-item-img">
                <img
                  src="./img/new_project/news-project-2.webp"
                  alt="news-project-2"
                />
                <div class="cut-1-right-item-white"></div>
              </div>
              <div class="cut-1-right-item-more">
                <h3>
                  恆合機構｜恆合建設中山段<span>/</span>
                  <p class="ph">臺北市</p>
                </h3>
                <p class="pc">臺北市</p>
                <a href="New_Project-inner.html">更多內容</a>
              </div>
            </div>
            <div class="cut-1-right-item">
              <div class="cut-1-right-item-img">
                <img
                  src="./img/new_project/news-project-3.webp"
                  alt="news-project-3"
                />
                <div class="cut-1-right-item-white"></div>
              </div>
              <div class="cut-1-right-item-more">
                <h3>
                  恆合芝山<span>/</span>
                  <p class="ph">臺北市</p>
                </h3>
                <p class="pc">臺北市</p>
                <a href="New_Project-inner.html">更多內容</a>
              </div>
            </div>
          </div>

          <div class="cut-1-fixed-img">
            <img
              src="./img/new_project/right-fixed@2x.webp"
              alt="cut-1-right-fixed"
            />
          </div>
        </div>
      </section>
    </main>
    <div class="new_project-cut-1-left-fixed-img ph">
      <img
        src="./img//new_project/fixed-left-bottom-ph.webp"
        alt="left-fixed"
      />
    </div>
    <footer id="footer" style="position: fixed">
      <span>Copyright © <span class="year">2024</span>恆合機構版權所有</span
      ><span>地址：231台灣新店區寶橋路140巷11號11樓</span
      ><span>TEL： 02-2910-8718</span>
    </footer>
    <script src="./js/jquery/jquery-3.7.1.min.js"></script>
    <script
      src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"
      integrity="sha256-lSjKY0/srUM9BE3dPm+c4fBo1dky2v27Gdjm2uoZaL0="
      crossorigin="anonymous"
    ></script>
    <script src="./js/nav.js"></script>
    <script src="./js/gsap/gsap.min.js"></script>
    <script src="./js/gsap/ScrollTrigger.min.js"></script>
    <script src="./js/gsap/SplitText.min.js"></script>
    <script>
      $(document).ready(function () {
        if (window.innerWidth <= 1024) {
          $(".pc").remove();
        } else {
          $(".ph").remove();
        }
      });
      $(window).on("load", function () {
        gsap.registerPlugin(ScrollTrigger, SplitText);

        let all = 0; //掛載id gasp動畫用
        $(".cut-1-right-item").each(function () {
          $(this).attr("id", `right-item-${all}`);
          all++;
        });

        //動畫延遲
        function addDelay(tag, tag1, tag2) {
          let delay = 300;
          $(tag).each(function (index) {
            $(this).css("animation-delay", `${delay}ms`);
            delay += 200;
          });
          $(tag1).each(function (index) {
            $(this).css("animation-delay", `${delay}ms`);
            delay += 200;
          });
          $(tag2).each(function (index) {
            $(this).css("animation-delay", `${delay}ms`);
            delay += 200;
          });
        }
        //大標文字拆字
        const titleSplit = new SplitText(
          ".cut-1-left-para-second-h1,.cut-1-left-para-second-h2,.cut-1-left-para-first h4,.cut-1-left-para-first-h1",
          {
            type: "chars",
          }
        );

        addDelay(
          ".cut-1-left-para-second-h1 div",
          ".cut-1-left-para-second-h2 div",
          ".cut-1-left-para-first-h1 div",
          ".cut-1-left-para-first-h4 div"
        );
        if (window.innerWidth > 1024) {
          gsap.from(titleSplit.chars, {
            stagger: 0.1,
            rotation: "40",
            x: "-110%",
            duration: 1,
            delay: 0.5,
            onComplete: function () {
              lastNewsAnimation(".cut-1-right-item", 100);
            },
          });
        } else {
          gsap.from(titleSplit.chars, {
            stagger: 0.1,
            rotation: "40",
            y: "110%",
            duration: 1,
            delay: 0.5,
          });
          lastNewsAnimation(".cut-1-right-item", 100);
        }

        function lastNewsAnimation(selector, xVal) {
          $(selector).each(function () {
            let thisId = $(this)[0].id;
            console.log($(this));
            if (window.innerWidth > 1024) {
              gsap.to(`#${thisId} .cut-1-right-item-white`, {
                scrollTrigger: {
                  trigger: `#${thisId}`,
                  toggleActions: "play none none none",
                  start: "top 60%",
                },
                x: "-250%",
                duration: 1.75,
                ease: "power2.out",
              });
            } else {
              gsap.from(`#${thisId}`, {
                scrollTrigger: {
                  trigger: `#${thisId}`,
                  toggleActions: "play none none none",
                  start: "center 75%",
                  markers: true,
                },
                opacity: 0,
                x: xVal,
                duration: 2,
              });
            }
            // gsap.from(`#${thisId}`, {
            //   scrollTrigger: {
            //     trigger: `#${thisId}`,
            //     toggleActions: "play none none none",
            //     start: "center bottom",
            //   },
            //   opacity: 0,
            //   x: xVal,
            //   duration: 2,
            // });
          });
        }
      });
    </script>
  </body>
</html>
