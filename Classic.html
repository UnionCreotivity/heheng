<!DOCTYPE html>
<html lang="zh-tw">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/all.css" />
    <title>經典建案</title>
  </head>
  <body>
    <div class="loading-page">
      <div class="box">
        <div class="box-img">
          <div class="box-img-para">
            <img src="./img/share/2x/hen@2x.png" alt="hen" />
          </div>
          <img src="./img/share/loading-logo02.svg" alt="logo02" />
        </div>
        <div class="box-para">
          <div class="loading-progress">0</div>
          <span>%</span>
        </div>
      </div>
    </div>
    <nav id="nav"></nav>
    <main id="classic">
      <section class="cut-1">
        <div class="cut-1-left">
          <div class="cut-1-left-banner">
            <picture>
              <source
                media="(max-width:1024px)"
                srcset="./img/classic/cut-1-L-ph.webp"
              />
              <img src="./img/classic/banner-L.webp" alt="banner-L" />
            </picture>
          </div>
          <div class="cut-1-left-para">
            <div class="cut-1-left-para-first">
              <h1 class="cut-1-left-para-first-h1">History</h1>
              <div class="cut-1-left-para-line"></div>
            </div>
            <div class="cut-1-left-para-second">
              <div class="cut-1-left-para-line-second pc"></div>
              <h4 class="cut-1-left-para-second-h4">
                經典建案
                <div class="bottom-line ph"></div>
              </h4>
            </div>
          </div>
        </div>
        <div class="cut-1-right">
          <div class="cut-1-right-date-picker">
            <div class="date-picker date-picker-all" data-value="all">ALL</div>
            <div class="date-picker date-picker-first" data-value="first">
              <p class="date-picker-date">2024</p>
              <div class="date-picker-line"></div>
              <p class="date-picker-date">2021</p>
            </div>
            <div class="date-picker date-picker-second" data-value="second">
              <p class="date-picker-date">2020</p>
              <div class="date-picker-line"></div>
              <p class="date-picker-date">2011</p>
            </div>
            <div class="date-picker date-picker-third" data-value="third">
              <p class="date-picker-date">2010</p>
              <div class="date-picker-line"></div>
              <p class="date-picker-date">2006</p>
            </div>
          </div>
          <div class="cut-1-right-item-container">
            <div class="swiper-wrapper pc">
              <div class="swiper-slide">
                <div class="swiper-slide-item">
                  <a
                    class="swiper-slide-item-img"
                    href="New_Project-inner.html"
                  >
                    <img
                      src="./img/classic/classic-pic-1.webp"
                      alt="classic-pic-1"
                    />
                    <div class="swiper-slide-item-img-back">
                      <h3>恆合芝山</h3>
                      <div class="line"></div>
                      <h1>2022</h1>
                    </div>
                  </a>
                </div>
                <div class="swiper-slide-item">
                  <a
                    class="swiper-slide-item-img"
                    href="New_Project-inner.html"
                  >
                    <img
                      src="./img/classic/classic-pic-2.webp"
                      alt="classic-pic-2"
                    />
                    <div class="swiper-slide-item-img-back">
                      <h3>江山</h3>
                      <div class="line"></div>
                      <h1>2022</h1>
                    </div>
                  </a>
                </div>
                <div class="swiper-slide-item">
                  <a
                    class="swiper-slide-item-img"
                    href="New_Project-inner.html"
                  >
                    <img
                      src="./img/classic/classic-pic-3.webp"
                      alt="classic-pic-3"
                    />
                    <div class="swiper-slide-item-img-back">
                      <h3>大安MONEY</h3>
                      <div class="line"></div>
                      <h1>2020</h1>
                    </div>
                  </a>
                </div>
              </div>
              <div class="swiper-slide">
                <div class="swiper-slide-item">
                  <a
                    class="swiper-slide-item-img"
                    href="New_Project-inner.html"
                  >
                    <img
                      src="./img/classic/classic-pic-4.webp"
                      alt="classic-pic-4"
                    />
                    <div class="swiper-slide-item-img-back">
                      <h3>瑋石天好韻</h3>
                      <div class="line"></div>
                      <h1>2019</h1>
                    </div>
                  </a>
                </div>
                <div class="swiper-slide-item">
                  <a
                    class="swiper-slide-item-img"
                    href="New_Project-inner.html"
                  >
                    <img
                      src="./img/classic/classic-pic-5.webp"
                      alt="classic-pic-5"
                    />
                    <div class="swiper-slide-item-img-back">
                      <h3>I世紀</h3>
                      <div class="line"></div>
                      <h1>2017</h1>
                    </div>
                  </a>
                </div>
                <div class="swiper-slide-item">
                  <a
                    class="swiper-slide-item-img"
                    href="New_Project-inner.html"
                  >
                    <img
                      src="./img/classic/classic-pic-6.webp"
                      alt="classic-pic-6"
                    />
                    <div class="swiper-slide-item-img-back">
                      <h3>瑋石登峰</h3>
                      <div class="line"></div>
                      <h1>2017</h1>
                    </div>
                  </a>
                </div>
              </div>
              <div class="swiper-slide">
                <div class="swiper-slide-item">
                  <a
                    class="swiper-slide-item-img"
                    href="New_Project-inner.html"
                  >
                    <img
                      src="./img/classic/classic-pic-7.webp"
                      alt="classic-pic-7"
                    />
                    <div class="swiper-slide-item-img-back">
                      <h3>大師大</h3>
                      <div class="line"></div>
                      <h1>2012</h1>
                    </div>
                  </a>
                </div>
              </div>
            </div>
            <div class="right-item ph">
              <div class="right-item-main">
                <a class="right-item-img" href="New_Project-inner.html">
                  <img
                    src="./img/classic/ph/classic-pic-1.webp"
                    alt="classic-pic-1"
                  />
                </a>
                <div class="right-item-para">
                  <h1>2022</h1>
                  <div class="line"></div>
                  <h3>恆合芝山</h3>
                </div>
              </div>
              <div class="right-item-main">
                <a class="right-item-img" href="New_Project-inner.html">
                  <img
                    src="./img/classic/ph/classic-pic-2.webp"
                    alt="classic-pic-1"
                  />
                </a>
                <div class="right-item-para">
                  <h1>2022</h1>
                  <div class="line"></div>
                  <h3>江山</h3>
                </div>
              </div>
              <div class="right-item-main">
                <a class="right-item-img" href="New_Project-inner.html">
                  <img
                    src="./img/classic/ph/classic-pic-3.webp"
                    alt="classic-pic-1"
                  />
                </a>
                <div class="right-item-para">
                  <h1>2020</h1>
                  <div class="line"></div>
                  <h3>大安MONEY</h3>
                </div>
              </div>
              <div class="right-item-main">
                <a class="right-item-img" href="New_Project-inner.html">
                  <img
                    src="./img/classic/ph/classic-pic-4.webp"
                    alt="classic-pic-1"
                  />
                </a>
                <div class="right-item-para">
                  <h1>2019</h1>
                  <div class="line"></div>
                  <h3>瑋石天好韻</h3>
                </div>
              </div>
              <div class="right-item-main">
                <a class="right-item-img" href="New_Project-inner.html">
                  <img
                    src="./img/classic/ph/classic-pic-5.webp"
                    alt="classic-pic-1"
                  />
                </a>
                <div class="right-item-para">
                  <h1>2017</h1>
                  <div class="line"></div>
                  <h3>I世紀</h3>
                </div>
              </div>
              <div class="right-item-main">
                <a class="right-item-img" href="New_Project-inner.html">
                  <img
                    src="./img/classic/ph/classic-pic-6.webp"
                    alt="classic-pic-1"
                  />
                </a>
                <div class="right-item-para">
                  <h1>2017</h1>
                  <div class="line"></div>
                  <h3>瑋石登峰</h3>
                </div>
              </div>
              <div class="right-item-main">
                <a class="right-item-img" href="New_Project-inner.html">
                  <img
                    src="./img/classic/ph/classic-pic-7.webp"
                    alt="classic-pic-1"
                  />
                </a>
                <div class="right-item-para">
                  <h1>2012</h1>
                  <div class="line"></div>
                  <h3>大師大</h3>
                </div>
              </div>
            </div>
          </div>
          <div class="right-fixed">
            <img
              src="./img/classic/classic-right-fixed.png"
              alt="classic-right-fixed"
            />
          </div>
        </div>
      </section>
    </main>
    <footer id="footer">
      <span>Copyright © <span class="year">2024</span>恆合機構版權所有</span
      ><span>地址：231台灣新店區寶橋路140巷11號11樓</span
      ><span>TEL： 02-2910-8718</span>
    </footer>
    <script src="./js/jquery/jquery-3.7.1.min.js"></script>
    <script
      src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"
      integrity="sha256-lSjKY0/srUM9BE3dPm+c4fBo1dky2v27Gdjm2uoZaL0="
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="./js/nav.js"></script>
    <script src="./js/gsap/gsap.min.js"></script>
    <script src="./js/gsap/ScrollTrigger.min.js"></script>
    <script src="./js/gsap/SplitText.min.js"></script>
    <script src="./js/classic.json"></script>
    <script src="./js/loading.js"></script>
    <script>
      $(document).ready(function () {
        if (window.innerWidth <= 1024) {
          $(".pc").remove();
        } else {
          $(".ph").remove();
        }
      });
      $(window).on("load", function () {
        gsap.registerPlugin(ScrollTrigger, SplitText);

        //日期選擇防呆
        $("#date-from-select").on("change", function () {
          const fromDate = $("#date-from-select").val();
          const toDate = $("#date-from-to").val();
          if (fromDate >= toDate) {
            let plus = Number(fromDate) + 1;
            $("#date-from-to").val(`${plus}`).change();
          }
        });
        $("#date-from-to").on("change", function () {
          const fromDate = $("#date-from-select").val();
          const toDate = $("#date-from-to").val();
          if (fromDate >= toDate) {
            let minus = Number(toDate) - 1;
            $("#date-from-select").val(`${minus}`).change();
          }
        });

        //動畫延遲
        function addDelay(tag, tag1, tag2) {
          let delay = 300;
          $(tag).each(function (index) {
            $(this).css("animation-delay", `${delay}ms`);
            delay += 100;
          });
          $(tag1).each(function (index) {
            $(this).css("animation-delay", `${delay}ms`);
            delay += 100;
          });
          $(tag2).each(function (index) {
            $(this).css("animation-delay", `${delay}ms`);
            delay += 100;
          });
        }

        //拆字
        const titleSplit = new SplitText(
          ".cut-1-left-para-first h1,.cut-1-left-para-second h4",
          {
            type: "chars",
          }
        );

        addDelay(
          ".cut-1-left-para-first-h1 div",
          ".cut-1-left-para-second-h4 div"
        );

        const cut1Animation = gsap.timeline({ delay: 0.75 });

        let classicSwiper;
        if (window.innerWidth > 1024) {
          //最開始的動畫
          cut1Animation
            .from(titleSplit.chars, {
              stagger: 0.1,
              rotation: "40",
              x: "-110%",
              duration: 1,
            })
            .from(
              ".swiper-slide-item-img",
              {
                y: "-100%",
                stagger: 0.5,
                duration: 1.5,
              },
              "<+0.5"
            );

          classicSwiper = new Swiper(".cut-1-right-item-container", {
            direction: "vertical",
            mousewheel: true,
            speed: 800,
            slidesPerView: "1",
            spaceBetween: 50,
          });
        } else {
          cut1Animation.from(titleSplit.chars, {
            stagger: 0.1,
            rotation: "40",
            y: "140%",
            duration: 1,
          });
          let all = 0;
          $(".right-item-main").each(function () {
            $(this).attr("id", `right-item-main-${all}`);
            all++;
          });
          slideAnimation(".right-item-main", "110");
        }

        //方塊滑行動畫
        function slideAnimation(selector, xVal) {
          $(selector).each(function () {
            let thisId = $(this)[0].id;
            console.log($(this));

            gsap.from(`#${thisId}`, {
              scrollTrigger: {
                trigger: `#${thisId}`,
                toggleActions: "play none none none",
                start: "center 75%",
              },
              opacity: 0,
              x: `${xVal}%`,
              duration: 2,
            });
          });
        }

        //撈資料
        $(".date-picker").on("click", function () {
          const value = $(this).data("value");
          $(".date-picker").css("color", "");
          if (!value) return;
          $(this).css("color", "#cfb38e");
          $(this)
            .children(".date-picker-line")
            .css("background-color", "#cfb38e");
          $.ajax({
            url: "./js/classic.json",
            type: "GET",
            dataType: "json",
            success: function (response) {
              let findRange;
              let allItems;
              let dataLength;
              if (value === "all") {
                let temp = [];
                findRange = response.forEach((el) => {
                  el.content?.forEach((el) => {
                    temp.push(el);
                  });
                });
                allItems = temp;
                dataLength = Math.ceil(allItems.length / 3);
              } else {
                findRange = response?.filter((item) => item.range === value);
                allItems = findRange[0]?.content;
                dataLength = Math.ceil(allItems.length / 3);
              }

              let src = "";
              let count = 0;
              console.log(value);
              if (window.innerWidth > 1024) {
                classicSwiper.removeAllSlides(); //刪除全部的swiper-slide
                for (let i = 0; i < dataLength; i++) {
                  for (let j = 0; j < 3; j++) {
                    if (allItems[count]) {
                      src += `
                      <a class="swiper-slide-item" href="${allItems[count].link}">
                       <div class="swiper-slide-item-img">
                         <img
                           src="${allItems[count].img}"
                           alt="classic-pic"
                        />
                         <div class="swiper-slide-item-img-back">
                           <h3>${allItems[count].title}</h3>
                           <div class="line"></div>
                           <h1>${allItems[count].year}</h1>
                         </div>
                      </div>
                     </a>
                      `;
                    }
                    count++;
                  }
                  classicSwiper.appendSlide(
                    `<div class="swiper-slide">${src}</div>`
                  );
                  src = ``;
                }
                gsap.from(".swiper-slide-item-img", {
                  y: "-100%",
                  stagger: 0.5,
                  duration: 1.5,
                });
              } else {
                for (let i = 0; i < allItems.length; i++) {
                  src += ` <a class="right-item-main" href="${allItems[i].link}">
                  <div class="right-item-img">
                    <img
                      src="${allItems[i].img}"
                      alt="classic-pic-1"
                    />
                  </div>
                  <div class="right-item-para">
                    <h1>${allItems[i].year}</h1>
                    <div class="line"></div>
                    <h3>${allItems[i].title}</h3>
                  </div>
                </a>`;
                }
                $(".right-item").empty().append(src);
                src = "";
                let all = 0;
                $(".right-item-main").each(function () {
                  $(this).attr("id", `right-item-main-${all}`);
                  all++;
                });
                slideAnimation(".right-item-main", "110");
              }
            },
            error: function (reject) {
              alert("錯誤！！！");
            },
          });
        });
      });
    </script>
  </body>
</html>
